<!DOCTYPE html>
<html lang="pt">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>View Incident</title>
  <link rel="stylesheet" href="incidents.css">
</head>

<body>
  <div class="form-container view-incident">
    <header class="form-header">
      <h1 id="page-title">Incident #<span id="incident-id"></span></h1>
      <a href="incidents.html" class="back-link">‚Üê Back to Incidents</a>
    </header>

    <form id="incident-form" class="incident-form" novalidate>
      <div class="incident-layout">
        <!-- LEFT COLUMN: Incident Details -->
        <div class="incident-main">
          <div class="form-row">
            <label for="title">Title *</label>
            <input id="title" name="title" type="text" required readonly>
          </div>

          <div class="form-grid">
            <div class="form-row">
              <label for="priority">Priority *</label>
              <select id="priority" name="priority" required disabled>
                <option value="high">High</option>
                <option value="medium">Medium</option>
                <option value="low">Low</option>
              </select>
            </div>
            <div class="form-row">
              <label for="category">Category *</label>
              <select id="category" name="category" required disabled>
                <option value="software">Software</option>
                <option value="network">Network</option>
                <option value="hardware">Hardware</option>
              </select>
            </div>
            <div class="form-row">
              <label for="status">Status *</label>
              <select id="status" name="status" required disabled>
                <option value="open">Open</option>
                <option value="in-progress">In Progress</option>
                <option value="closed">Closed</option>
              </select>
            </div>
          </div>

          <div class="form-row">
            <label for="description">Description</label>
            <textarea id="description" name="description" rows="5" readonly></textarea>
          </div>

          <!-- ATTACHMENTS -->
          <div class="form-row attachments-area">
            <label>Attachments</label>
            <div id="drop-zone" class="drop-zone">
              <input type="file" id="file-input" multiple accept="image/*,.pdf,.txt">
              <p>Drag & drop files here or <span class="accent">click to browse</span></p>
            </div>
            <ul id="file-list" class="file-list"></ul>
          </div>

          <div class="modal-actions">
            <button type="button" id="btn-edit" class="btn btn-ghost">Edit</button>
            <button type="submit" id="btn-save" class="btn btn-primary" disabled>Save</button>
          </div>
        </div>

        <!-- RIGHT COLUMN: Sidebar (AI + Git) -->
        <div class="sidebar-stack" style="display: flex; flex-direction: column; gap: 1.5rem;">

          <div id="ai-suggestion-container" class="incident-sidebar" style="display: none;">
            <div class="ai-card">
              <label class="ai-label">‚ú® AI Resolution Suggestion</label>
              <div id="ai-suggestion-content" class="ai-content">
                Loading suggestion...
              </div>
            </div>
          </div>

          <!-- Git Integration -->
          <div class="incident-sidebar">
            <div class="ai-card" style="border-color: #fca5a5;">
              <label class="ai-label" style="color: #e11d48;">üèóÔ∏è Git Integration</label>
              <div id="git-integration-content" class="ai-content"
                style="display: flex; flex-direction: column; gap: 10px;">

                <!-- Branch Name -->
                <div>
                  <label style="font-size: 0.8em; color: #666; display: block; margin-bottom: 2px;">Branch Name</label>
                  <div style="display: flex; gap: 5px;">
                    <input type="text" id="git-branch-name-input"
                      style="flex: 1; padding: 4px; border: 1px solid var(--border); border-radius: 4px; font-family: monospace; font-size: 0.85em; background: var(--bg); color: var(--text);">
                    <button type="button" id="btn-copy-name" title="Copy"
                      style="border: 1px solid var(--border); background: var(--card); border-radius: 4px; cursor: pointer; padding: 0 6px;">üìã</button>
                  </div>
                </div>

                <!-- Checkout Command -->
                <div>
                  <label style="font-size: 0.8em; color: #666; display: block; margin-bottom: 2px;">Checkout Cmd</label>
                  <div style="display: flex; gap: 5px;">
                    <input type="text" id="git-checkout-cmd" readonly
                      style="flex: 1; padding: 4px; border: 1px solid var(--border); border-radius: 4px; font-family: monospace; font-size: 0.85em; background: #f3f4f6; color: #6b7280;">
                    <button type="button" id="btn-copy-checkout" title="Copy"
                      style="border: 1px solid var(--border); background: var(--card); border-radius: 4px; cursor: pointer; padding: 0 6px;">üìã</button>
                  </div>
                </div>

                <!-- Commit Message -->
                <div>
                  <label style="font-size: 0.8em; color: #666; display: block; margin-bottom: 2px;">Commit Msg</label>
                  <div style="display: flex; gap: 5px;">
                    <input type="text" id="git-commit-cmd" readonly
                      style="flex: 1; padding: 4px; border: 1px solid var(--border); border-radius: 4px; font-family: monospace; font-size: 0.85em; background: #f3f4f6; color: #6b7280;">
                    <button type="button" id="btn-copy-commit" title="Copy"
                      style="border: 1px solid var(--border); background: var(--card); border-radius: 4px; cursor: pointer; padding: 0 6px;">üìã</button>
                  </div>
                </div>

                <!-- Action Button -->
                <div style="margin-top: 5px;">
                  <button type="button" id="btn-link-branch" class="btn btn-secondary"
                    style="width: 100%; font-size: 0.9em; padding: 6px;">Link Branch Only</button>
                  <div id="msg-linked"
                    style="display: none; text-align: center; color: #10b981; font-size: 0.9em; font-weight: bold; margin-top: 5px;">
                    ‚úÖ Branch Linked
                  </div>
                </div>

              </div>
            </div>
          </div>

        </div>
      </div>
    </form>
  </div>

  <script src="view_incident.js?v=6"></script>
</body>

</html>